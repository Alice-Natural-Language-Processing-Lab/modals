/** Modals v5.2.1, by Chris Ferdinandi | http://github.com/cferdinandi/modals | Licensed under MIT: http://gomakethings.com/mit/ */
!function(e,t){"function"==typeof define&&define.amd?define("modals",t(e)):"object"==typeof exports?module.exports=t(e):e.modals=t(e)}(this,function(e){"use strict";var t,n={},o=!!document.querySelector&&!!e.addEventListener,a={modalActiveClass:"active",modalBGClass:"modal-bg",offset:50,callbackBeforeOpen:function(){},callbackAfterOpen:function(){},callbackBeforeClose:function(){},callbackAfterClose:function(){}},l=function(e,t,n){if("[object Object]"===Object.prototype.toString.call(e))for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(n,e[o],o,e);else for(var a=0,l=e.length;l>a;a++)t.call(n,e[a],a,e)},c=function(e,t){var n={};return l(e,function(t,o){n[o]=e[o]}),l(t,function(e,o){n[o]=t[o]}),n},d=function(e,t){if(!e.classList.contains(t)){var n=e.querySelector("iframe"),o=e.querySelector("video");if(n){var a=n.src;n.src=a}o&&o.pause()}};n.openModal=function(e,t,n,o){var l=c(l||a,n||{}),d=document.querySelector(t),i=document.createElement("div");i.setAttribute("data-modal-bg",null),i.classList.add(l.modalBGClass),o&&(o.stopPropagation(),e&&"a"===e.tagName.toLowerCase()&&o.preventDefault()),l.callbackBeforeOpen(e,t),d.classList.add(l.modalActiveClass),d.style.top=window.pageYOffset+parseInt(l.offset,10)+"px",document.body.appendChild(i),l.callbackAfterOpen(e,t)};var i=function(e){var t=c(a,e||{}),n=document.querySelectorAll("[data-modal-window]."+t.modalActiveClass),o=document.querySelectorAll("[data-modal-bg]");(n.length>0||o.length>0)&&(t.callbackBeforeClose(),l(n,function(e){e.classList.contains(t.modalActiveClass)&&(d(e),e.classList.remove(t.modalActiveClass))}),l(o,function(e){document.body.removeChild(e)}),t.callbackAfterClose())},r=function(e,t){27===t.keyCode&&i(e,t)},s=function(e){e.stopPropagation()};return n.init=function(e){if(o){t=c(a,e||{});var d=document.querySelectorAll("[data-modal]"),u=document.querySelectorAll("[data-modal-window]"),f=document.querySelectorAll("[data-modal-close]");l(d,function(e){e.addEventListener("click",n.openModal.bind(null,e,e.getAttribute("data-modal"),t),!1)}),l(f,function(e){e.addEventListener("click",i.bind(null,t),!1)}),document.addEventListener("click",i.bind(null,t),!1),document.addEventListener("touchstart",i.bind(null,t),!1),document.addEventListener("keydown",r.bind(null,t),!1),l(u,function(e){e.addEventListener("click",s,!1),e.addEventListener("touchstart",s,!1)})}},n});