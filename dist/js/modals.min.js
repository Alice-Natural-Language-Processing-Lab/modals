/** Modals v5.3.1, by Chris Ferdinandi | http://github.com/cferdinandi/modals | Licensed under MIT: http://gomakethings.com/mit/ */
!function(e,t){"function"==typeof define&&define.amd?define("modals",t(e)):"object"==typeof exports?module.exports=t(e):e.modals=t(e)}(this,function(e){"use strict";var t,o,n,l,a={},c=!!document.querySelector&&!!e.addEventListener,s={toggles:[],modals:[],buttons:[]},d={modalActiveClass:"active",modalBGClass:"modal-bg",offset:50,callbackBeforeOpen:function(){},callbackAfterOpen:function(){},callbackBeforeClose:function(){},callbackAfterClose:function(){}},r=function(e,t,o){if("[object Object]"===Object.prototype.toString.call(e))for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(o,e[n],n,e);else for(var l=0,a=e.length;a>l;l++)t.call(o,e[l],l,e)},i=function(e,t){var o={};return r(e,function(t,n){o[n]=e[n]}),r(t,function(e,n){o[n]=t[n]}),o},u=function(e,t){if(!e.classList.contains(t)){var o=e.querySelector("iframe"),n=e.querySelector("video");if(o){var l=o.src;o.src=l}n&&n.pause()}};a.openModal=function(e,t,o,n){var l=i(l||d,o||{}),a=document.querySelector(t),c=document.createElement("div");c.setAttribute("data-modal-bg",null),c.classList.add(l.modalBGClass),n&&(n.stopPropagation(),e&&"a"===e.tagName.toLowerCase()&&n.preventDefault()),l.callbackBeforeOpen(e,t),a.classList.add(l.modalActiveClass),a.style.top=window.pageYOffset+parseInt(l.offset,10)+"px",document.body.appendChild(c),l.callbackAfterOpen(e,t)},a.closeModals=function(e,t,o){var n=i(d,t||{}),l=document.querySelectorAll("[data-modal-window]."+n.modalActiveClass),a=document.querySelectorAll("[data-modal-bg]");o&&e&&"a"===e.tagName.toLowerCase()&&o.preventDefault(),(l.length>0||a.length>0)&&(n.callbackBeforeClose(),r(l,function(e){e.classList.contains(n.modalActiveClass)&&(u(e),e.classList.remove(n.modalActiveClass))}),r(a,function(e){document.body.removeChild(e)}),n.callbackAfterClose())};var m=function(e,t){27===t.keyCode&&a.closeModals(null,e,t)},f=function(e){e.stopPropagation()};return a.destroy=function(){t&&(o&&(r(o,function(e,t){e.removeEventListener("click",s.toggles[t],!1)}),r(n,function(e,t){e.removeEventListener("click",s.modals[t],!1),e.removeEventListener("touchstart",s.modals[t],!1)}),r(l,function(e,t){e.removeEventListener("click",s.buttons[t],!1)}),document.removeEventListener("click",a.closeModals,!1),document.removeEventListener("touchstart",a.closeModals,!1),document.removeEventListener("keydown",m,!1),s.toggles=[],s.modals=[],s.buttons=[]),t=null,o=null,n=null,l=null)},a.init=function(e){c&&(a.destroy(),t=i(d,e||{}),o=document.querySelectorAll("[data-modal]"),n=document.querySelectorAll("[data-modal-window]"),l=document.querySelectorAll("[data-modal-close]"),r(o,function(e,o){s.toggles[o]=a.openModal.bind(null,e,e.getAttribute("data-modal"),t),e.addEventListener("click",s.toggles[o],!1)}),r(l,function(e,o){s.buttons[o]=a.closeModals.bind(null,e,t),e.addEventListener("click",s.buttons[o],!1)}),document.addEventListener("click",a.closeModals.bind(null,null,t),!1),document.addEventListener("touchstart",a.closeModals.bind(null,null,t),!1),document.addEventListener("keydown",m.bind(null,t),!1),r(n,function(e,t){s.modals[t]=f,e.addEventListener("click",s.modals[t],!1),e.addEventListener("touchstart",s.modals[t],!1)}))},a});