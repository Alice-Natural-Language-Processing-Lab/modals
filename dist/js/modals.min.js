/** Modals v5.4.2, by Chris Ferdinandi | http://github.com/cferdinandi/modals | Licensed under MIT: http://gomakethings.com/mit/ */
!function(e,t){"function"==typeof define&&define.amd?define("modals",t(e)):"object"==typeof exports?module.exports=t(e):e.modals=t(e)}(window||this,function(e){"use strict";var t,o={},n=!!document.querySelector&&!!e.addEventListener,a={modalActiveClass:"active",modalBGClass:"modal-bg",offset:50,callbackBeforeOpen:function(){},callbackAfterOpen:function(){},callbackBeforeClose:function(){},callbackAfterClose:function(){}},l=function(e,t,o){if("[object Object]"===Object.prototype.toString.call(e))for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(o,e[n],n,e);else for(var a=0,l=e.length;l>a;a++)t.call(o,e[a],a,e)},c=function(e,t){var o={};return l(e,function(t,n){o[n]=e[n]}),l(t,function(e,n){o[n]=t[n]}),o},r=function(e,t){for(var o=t.charAt(0);e&&e!==document;e=e.parentNode)if("."===o){if(e.classList.contains(t.substr(1)))return e}else if("#"===o){if(e.id===t.substr(1))return e}else if("["===o&&e.hasAttribute(t.substr(1,t.length-2)))return e;return!1},s=function(e,t){if(!e.classList.contains(t)){var o=e.querySelector("iframe"),n=e.querySelector("video");if(o){var a=o.src;o.src=a}n&&n.pause()}};o.openModal=function(e,t,o){var n=c(n||a,o||{}),l=document.querySelector(t),r=document.createElement("div");r.setAttribute("data-modal-bg",null),r.classList.add(n.modalBGClass),n.callbackBeforeOpen(e,t),l.classList.add(n.modalActiveClass),l.style.top=window.pageYOffset+parseInt(n.offset,10)+"px",document.body.appendChild(r),n.callbackAfterOpen(e,t)},o.closeModals=function(e,t){var o=c(a,t||{}),n=document.querySelectorAll("[data-modal-window]."+o.modalActiveClass),r=document.querySelectorAll("[data-modal-bg]");(n.length>0||r.length>0)&&(o.callbackBeforeClose(),l(n,function(e){e.classList.contains(o.modalActiveClass)&&(s(e),e.classList.remove(o.modalActiveClass))}),l(r,function(e){document.body.removeChild(e)}),o.callbackAfterClose())};var d=function(e){var n=e.target,a=r(n,"[data-modal]"),l=r(n,"[data-modal-close]"),c=r(n,"[data-modal-window]"),s=e.keyCode;if(s&&27===s)o.closeModals(null,t,e);else if(n){if(c&&!l)return;a?(e.preventDefault(),o.openModal(a,a.getAttribute("data-modal"),t)):(e.preventDefault(),o.closeModals(n,t,e))}};return o.destroy=function(){t&&(document.removeEventListener("click",d,!1),document.removeEventListener("touchstart",d,!1),document.removeEventListener("keydown",d,!1),t=null)},o.init=function(e){n&&(o.destroy(),t=c(a,e||{}),document.addEventListener("click",d,!1),document.addEventListener("touchstart",d,!1),document.addEventListener("keydown",d,!1))},o});