/** Modals v5.3.0, by Chris Ferdinandi | http://github.com/cferdinandi/modals | Licensed under MIT: http://gomakethings.com/mit/ */
!function(e,t){"function"==typeof define&&define.amd?define("modals",t(e)):"object"==typeof exports?module.exports=t(e):e.modals=t(e)}(this,function(e){"use strict";var t,n,o,l,a={},c=!!document.querySelector&&!!e.addEventListener,s={toggles:[],modals:[],buttons:[]},d={modalActiveClass:"active",modalBGClass:"modal-bg",offset:50,callbackBeforeOpen:function(){},callbackAfterOpen:function(){},callbackBeforeClose:function(){},callbackAfterClose:function(){}},i=function(e,t,n){if("[object Object]"===Object.prototype.toString.call(e))for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(n,e[o],o,e);else for(var l=0,a=e.length;a>l;l++)t.call(n,e[l],l,e)},r=function(e,t){var n={};return i(e,function(t,o){n[o]=e[o]}),i(t,function(e,o){n[o]=t[o]}),n},u=function(e,t){if(!e.classList.contains(t)){var n=e.querySelector("iframe"),o=e.querySelector("video");if(n){var l=n.src;n.src=l}o&&o.pause()}};a.openModal=function(e,t,n,o){var l=r(l||d,n||{}),a=document.querySelector(t),c=document.createElement("div");c.setAttribute("data-modal-bg",null),c.classList.add(l.modalBGClass),o&&(o.stopPropagation(),e&&"a"===e.tagName.toLowerCase()&&o.preventDefault()),l.callbackBeforeOpen(e,t),a.classList.add(l.modalActiveClass),a.style.top=window.pageYOffset+parseInt(l.offset,10)+"px",document.body.appendChild(c),l.callbackAfterOpen(e,t)};var m=function(e){var t=r(d,e||{}),n=document.querySelectorAll("[data-modal-window]."+t.modalActiveClass),o=document.querySelectorAll("[data-modal-bg]");(n.length>0||o.length>0)&&(t.callbackBeforeClose(),i(n,function(e){e.classList.contains(t.modalActiveClass)&&(u(e),e.classList.remove(t.modalActiveClass))}),i(o,function(e){document.body.removeChild(e)}),t.callbackAfterClose())},f=function(e,t){27===t.keyCode&&m(e,t)},v=function(e){e.stopPropagation()};return a.destroy=function(){t&&(n&&(i(n,function(e,t){e.removeEventListener("click",s.toggles[t],!1)}),i(o,function(e,t){e.removeEventListener("click",s.modals[t],!1),e.removeEventListener("touchstart",s.modals[t],!1)}),i(l,function(e,t){e.removeEventListener("click",s.buttons[t],!1)}),document.removeEventListener("click",m,!1),document.removeEventListener("touchstart",m,!1),document.removeEventListener("keydown",f,!1),s.toggles=[],s.modals=[],s.buttons=[]),t=null,n=null,o=null,l=null)},a.init=function(e){c&&(a.destroy(),t=r(d,e||{}),n=document.querySelectorAll("[data-modal]"),o=document.querySelectorAll("[data-modal-window]"),l=document.querySelectorAll("[data-modal-close]"),i(n,function(e,n){s.toggles[n]=a.openModal.bind(null,e,e.getAttribute("data-modal"),t),e.addEventListener("click",s.toggles[n],!1)}),i(l,function(e,n){s.buttons[n]=m.bind(null,t),e.addEventListener("click",s.buttons[n],!1)}),document.addEventListener("click",m.bind(null,t),!1),document.addEventListener("touchstart",m.bind(null,t),!1),document.addEventListener("keydown",f.bind(null,t),!1),i(o,function(e,t){s.modals[t]=v,e.addEventListener("click",s.modals[t],!1),e.addEventListener("touchstart",s.modals[t],!1)}))},a});